<html>
	<head>
		<meta charset="utf-8">
		<title>YaYa</title>
		<link rel="stylesheet" href="app://css/normalize.css">
		<link rel="stylesheet" type="text/css" href="app://js/easyUI/themes/metro/easyui.css">
		<link rel="stylesheet" href="app://css/style.css">
		<style>
			.left {
				float: left;
			}
		</style>
	</head>
	<body style="width:100%;height:100%; border: 2px solid gray;">
		<script type="text/x-handlebars">
			{{outlet}}
		</script>
		
		<script type="text/x-handlebars" id="chat">
            <div style="padding: 20px">
                {{#link-to 'options'}} Options {{/link-to}}
                <a>chat</a>
            </div>
    		<div style="padding: 20px">
                {{#each msg in model.messages }}
                    <span>{{msg.message}}</span><br/>
                {{/each}}
    		</div>
            <div style="padding: 20px">
                {{view Ws.FocusableTextField enterPress="sendCommand" value=command}}
            </div>
		</script>

        <script type="text/x-handlebars" id="options">
            <div style="padding: 20px">
                <a>options</a>,
                {{#link-to 'chat'}} Chat {{/link-to}}
            </div>
            <div style="padding: 20px">
                <div>
                <p>This is the options panel</p>
                </div>
                <button {{action "closeApp"}}>exit</button>
            </div>
        </script>


        <script type="text/x-handlebars" id="idle">
            <div style="padding: 20px">
                {{#link-to 'options'}} Options {{/link-to}}
                {{#link-to 'chat'}} Chat {{/link-to}}
            </div>
            <div style="padding: 20px">
                <div>
                <p>Im idle</p>
                </div>
            </div>
        </script>

        <script type="text/x-handlebars" id="notification">
            <div style="padding: 20px">
                {{#link-to 'chat'}} Ok {{/link-to}}
            </div>
            <div style="padding: 20px">
                Notification:<br/>
                {{#each msg in model.lastMessages}}
                <span>{{msg.message}}</span><br/>
                {{/each}}
            </div>
        </script>

        <script>
            window.py = {}
        </script>

        <script type="text/python">
            from py import interface

            window.py.update = interface.update
            window.py.cmd = interface.cmd
            window.py.get_new_msg = interface.get_new_msg
            window.py.get_all_msg = interface.get_all_msg
            window.py.options_get = interface.options_get
            window.py.options_set = interface.options_set
            window.py.profile_get = interface.profile_get
            window.py.profile_set = interface.profile_set
            window.py.init = interface.init

        </script>

		<script src="app://js/jquery-1.10.2.js"></script>
		<script src="app://js/easyUI/jquery.easyui.min.js"></script>
		<script src="app://js/handlebars-1.1.2.js"></script>
		<script src="app://js/ember-1.5.1.js"></script>
		<script src="app://app.js"></script>
	</body>
</html>